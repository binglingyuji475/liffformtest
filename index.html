<html lang="ja">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <meta name="robots" content="noindex">
        <title>当選登録フォーム|春のレグザとお友だちになろう！キャンペーン</title>
        <link rel="stylesheet" href="https://geppy-liff.s3-ap-northeast-1.amazonaws.com/lambda-assets/css/style.css">
        <link rel="stylesheet" href="https://geppy-liff.s3-ap-northeast-1.amazonaws.com/lambda-assets/css/form.css">
    </head>
    <body class="mb-entry">
        <form action="./done" method="post" id='confirmSubmit' name="cpform" class="h-adr">
            
            <div id="form-wrapper">
                <div id="confirm-wrapper" style="display: none">
                    <h1 id="confirm-title" class="form-ttl">入力内容確認</h1>
                    <div id="confirm-message" class="form-message">
                        <p>入力内容を確認した後、送信ボタンを押してください。</p>
                    </div>
                </div>
                <div id="input-wrapper">
                    <h1 id="form-title" class="form-ttl" style="background-color:#000000;">
当選登録フォーム
</h1>
                    本フォームは「青森県産サンふじプレミアム特糖賞1段3kg」の当選者のみにお送しております。
下記のフォームに必要事項を入力し、「確認」ボタンを押してください。

お預かりしたお客様の個人情報は当選者の連絡確認にのみ使用させていただきます。
                    <div id="form-message" class="form-message">
                        <p></p>
                        <div class="note-box">
                            <p>※ご住所の入力をお間違えになると賞品の発送ができませんので、ご注意ください(番地以降の未記入・漏れなど)</p>
                        </div>
                    </div>
                </div>

                <div class="form-box">
                    <input type="hidden" name="lineUserId" id='lineUserId'>
                    <input type="hidden" name="displayName" id='displayName'>
                    <input type="hidden" name="top_url">
                    <input type="hidden" name="liff_app" id='liff_app' value="1660782608-xn7Qk6MO">
                    <input type="hidden" id='kAppId' value="1157">

                    
       <div class="form-box-sub">
            <label class="form-label" for="name">氏名<span>必須</span></label>
            <div class="form-box-inner">
                <input type="text" class="confirm-disable" name="name" placeholder="" >
                <p id='name_error' class=""></p>
            </div>
        </div>
        
        <div class="form-box-sub">
            <span class="p-country-name" style="display:none;">Japan</span>
            <label class="form-label" for="postcode">郵便番号<span>必須</span></label>
            <div class="form-box-inner">
                <input type="tel" class="p-postal-code confirm-disable" name="postcode" placeholder="">
                <p class="note">※半角数字7ケタ、ハイフンなしで入力してください。</p>
                <p id='postcode_error' class=""></p>
            </div>
        </div>
        
        <div class="form-box-sub">
            <label class="form-label" for="address">市区町村<span>必須</span></label>
            <div class="form-box-inner">
                <input type="text" class="confirm-disable" name="address" placeholder="" >
                <p id='address_error' class=""></p>
            </div>
        </div>
        
        <div class="form-box-sub">
            <label class="form-label" for="address2">丁番地<span>必須</span></label>
            <div class="form-box-inner">
                <input type="text" class="confirm-disable" name="address2" placeholder="" >
                <p id='address2_error' class=""></p>
            </div>
        </div>
        
        <div class="form-box-sub">
            <label class="form-label" for="address3">建物名</label>
            <div class="form-box-inner">
                <input type="text" class="confirm-disable" name="address3" placeholder="" >
                <p id='address3_error' class=""></p>
            </div>
        </div>
        
        <div class="form-box-sub">
            <label class="form-label" for="phonenumber">電話番号<span>必須</span></label>
            <div class="form-box-inner">
                <input type="text" class="confirm-disable" name="phonenumber" placeholder="" >
                <p id='phonenumber_error' class=""></p>
            </div>
        </div>
        
        

                    

                    <div class="form-btn column" id="input-mode-btn-wrapper">
                        <input id="confirm-button" class="m-btn m-btn-blue-light" type="button" name="confirm" value="登録内容を確認する">
                    </div>
                    <div class="form-btn column confirm-mode" id="confirm-mode-btn-wrapper" style="display: none">
                        <button id="comp-button" class="m-btn m-btn-blue-light" type="submit" name="comp">送信する</button>
                        <input id="back-button" class="m-btn m-btn-gray" type="submit"  value="修正する">
                    </div>
                </div>
                
            </div>
        </form>
     </body>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://yubinbango.github.io/yubinbango/yubinbango.js"></script>
    <script src="https://geppy-liff.s3-ap-northeast-1.amazonaws.com/lambda-assets/js/components/validator.js"></script>
    <script src="https://geppy-liff.s3-ap-northeast-1.amazonaws.com/lambda-assets/js/image-upload-private.js"></script>
    <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
    <script src="https://geppy-liff.s3-ap-northeast-1.amazonaws.com/lambda-assets/js/components/liff.js"></script>
    <script src="https://geppy-liff.s3-ap-northeast-1.amazonaws.com/lambda-assets/js/components/btn-control.js"></script>
    <script src="https://geppy-liff.s3-ap-northeast-1.amazonaws.com/lambda-assets/js/components/build-full-name.js"></script>
    
    
    
     <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
    <script>
                        var trigger = document.querySelectorAll('input[type="number"]');

                        trigger.forEach(function (target) {
                            console.log(target)
                            target.addEventListener('keyup', function (e) {
                                if (Number(e.target.value) < 0) {
                                        e.target.value = ""
                                    }
                            });
                            target.addEventListener('mouseup', function (e) {
                                if (Number(e.target.value) < 0) {
                                        e.target.value = ""
                                    }
                            });
                        });
                        var validateRulesObj = {"name":[{"validateType":"InputString","errorMessage":"こちらの項目は必須です。"},{"validateType":"MinString","length":"1","errorMessage":"1文字以上入力してください。"},{"validateType":"MaxString","length":"50","errorMessage":"入力文字数が50文字を超えています。"}],"postcode":[{"validateType":"Number","errorMessage":"半角数字で入力してください。"},{"validateType":"InputString","errorMessage":"こちらの項目は必須です。"},{"validateType":"MinString","length":"1","errorMessage":"1文字以上入力してください。"},{"validateType":"MaxString","length":"7","errorMessage":"入力文字数が7文字を超えています。"}],"address":[{"validateType":"InputString","errorMessage":"こちらの項目は必須です。"}],"address2":[{"validateType":"InputString","errorMessage":"こちらの項目は必須です。"}],"address3":{},"phonenumber":[{"validateType":"InputString","errorMessage":"こちらの項目は必須です。"},{"validateType":"Number","errorMessage":"半角数字で入力してください。"}]};
                        // バリデーション処理：onSubmitで呼び出し
                        window.addEventListener("load", function (e) {
                            var BtnControlObj = new BtnControl(validateRulesObj);
                            BtnControlObj.initialize();
                        });


                  
    
   
   
        
        $(document).ready(function () {
            const liffId = "1660782608-xn7Qk6MO";
            initializeLiff(liffId);
        })

        function initializeLiff(liffId) {
            liff.init({
                liffId: liffId
            }).then(() => {
                initializeApp();
            }).catch((err) => {
                console.log('LIFF Initialization failed ', err);
            });
        }

        function sendText(text) {
            liff.sendMessages([{
                'type': 'text',
                'text': text
            }]).then(function () {
                liff.closeWindow();
            }).catch(function (error) {
                window.alert('Failed to send message ' + error);
            });
        }
        
        const params = (new URL(document.location)).searchParams;
        const key = params.get('key');

        $(function () {
            $('form').submit(function () {
                const title  = '[お問い合わせ内容]';
                const name = $('input[name="name"]').val();
                const tel = $('input[name="tel"]').val();
                const email  = $('input[name="email"]').val();
                const text  = $('input[name="text"]').val();
                const memo  = '★以上のお問い合わせを受け付けました。内容を確認の上、担当者よりご連絡いたします。★';
                
                
                const msg = `${title}\n■お名前:\n${name}\n■電話番号:\n${tel}\n■メールアドレス:\n${email}\n■問い合わせ内容:\n${text}\n\n${memo}`;
                sendText(msg);

                return false;
            });
        });

    </script>

</body>
</html>
